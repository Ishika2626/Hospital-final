@{
    ViewData["Title"] = "Blood Bank Reports";
    Layout = "~/Views/Shared/_StaffLayout.cshtml";
}

<a asp-controller="StaffHome" asp-action="BloodBankStaffDashboard" class="btn btn-secondary mb-3">⬅ Back to Dashboard</a>

<h2 class="text-center my-3">📊 Blood Bank Reports</h2>

<div class="container">
    <div class="d-flex flex-wrap justify-content-between mb-3 gap-2">
        <input type="text" id="searchInput" class="form-control flex-grow-1 w-auto" placeholder="🔍 Search Report">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#generateReportModal">📑 Generate Report</button>
    </div>

    <div class="table-responsive">
        <table class="table table-bordered table-striped text-center" id="reportTable">
            <thead class="table-dark text-white">
                <tr>
                    <th>#</th>
                    <th>Report Type</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>🔴 Blood Shortage Report</td>
                    <td>2025-03-12</td>
                    <td><span class="badge bg-warning">Pending</span></td>
                    <td>
                        <button class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#viewReportModal">👁 View</button>
                        <button class="btn btn-sm btn-success" data-bs-toggle="modal" data-bs-target="#downloadReportModal">⬇ Download</button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>🩸 Donation Summary</td>
                    <td>2025-03-10</td>
                    <td><span class="badge bg-success">Completed</span></td>
                    <td>
                        <button class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#viewReportModal">👁 View</button>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>🚑 Emergency Request Report</td>
                    <td>2025-03-08</td>
                    <td><span class="badge bg-danger">Critical</span></td>
                    <td>
                        <button class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#viewReportModal">👁 View</button>
                        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#sendAlertModal">⚠ Send Alert</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Generate Report Modal -->
<div class="modal fade" id="generateReportModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">📑 Generate Report</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <label>Select Report Type:</label>
                <select class="form-control">
                    <option>🔴 Blood Shortage Report</option>
                    <option>🩸 Donation Summary</option>
                    <option>🚑 Emergency Request Report</option>
                </select>
                <label>Select Date:</label>
                <input type="date" class="form-control">
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary">Generate</button>
            </div>
        </div>
    </div>
</div>

<!-- View Report Modal -->
<div class="modal fade" id="viewReportModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">👁 View Report</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Report Type:</strong> Blood Shortage Report</p>
                <p><strong>Date:</strong> 2025-03-12</p>
                <p><strong>Status:</strong> Pending</p>
            </div>
        </div>
    </div>
</div>

<!-- Download Report Modal -->
<div class="modal fade" id="downloadReportModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">⬇ Download Report</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Click below to download the report.</p>
                <a href="#" class="btn btn-success">Download</a>
            </div>
        </div>
    </div>
</div>

<!-- Send Alert Modal -->
<div class="modal fade" id="sendAlertModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">⚠ Send Emergency Alert</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <label>Alert Message:</label>
                <textarea class="form-control" placeholder="Enter alert message"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger">Send Alert</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Search -->
<script>
    document.getElementById("searchInput").addEventListener("keyup", function () {
        let filter = this.value.toLowerCase();
        document.querySelectorAll("#reportTable tbody tr").forEach(row => {
            row.style.display = row.cells[1].textContent.toLowerCase().includes(filter) ? "" : "none";
        });
    });
</script>

<!-- CSS for Responsiveness -->
<style>
    /* Table scrolling */
    .table-responsive {
        overflow-x: auto;
    }

    /* Modal Styling */
    .modal-content {
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    /* Adjust input fields and buttons for smaller screens */
    @@media (max-width: 768px) {
        .d-flex

    {
        flex-direction: column;
        align-items: stretch;
    }

    .btn {
        font-size: 14px;
        padding: 8px 12px;
    }

    input, select, textarea {
        font-size: 14px;
        padding: 8px;
    }

    .modal-content {
        width: 95%;
        padding: 10px;
    }

    }

    @@media (max-width: 480px) {
        .btn

    {
        width: 100%;
        margin-top: 5px;
    }

    }
</style>
